<!doctype html>
{% extends "base.html" %}
{% block content %}
<section class="relative">
  <div class="max-w-6xl mx-auto px-4 py-10">
    <!-- Hero -->
    <div class="mb-8 grid lg:grid-cols-[1.2fr,0.8fr] gap-6 items-stretch">
      <div class="card-xl p-6">
        <div class="flex items-start justify-between mb-4">
          <div>
            <h1 class="text-2xl md:text-3xl font-extrabold tracking-tight">
              Plan your week in minutes
            </h1>
            <p class="mt-1 text-slate-300">
              High‑protein, low‑effort meals with Instacart‑ready shopping.
            </p>
          </div>
          <span class="badge-premium">Premium</span>
        </div>

        <form action="/plan" method="post" class="grid sm:grid-cols-2 gap-4">
          <div>
            <label class="fld">Primary Goal</label>
            <select name="goal" class="input">
              <option>Fat loss</option>
              <option>Recomp</option>
              <option>Maintenance</option>
            </select>
          </div>
          <div>
            <label class="fld">Meals per day</label>
            <select name="meals_per_day" class="input">
              <option>3</option><option selected>4</option><option>5</option>
            </select>
          </div>

          <div>
            <label class="fld">Bodyweight (lb)</label>
            <input class="input" type="number" name="bodyweight" min="90" max="400" value="185"/>
          </div>
          <div>
            <label class="fld">Calories/day (optional)</label>
            <input class="input" type="number" name="calories" placeholder="Auto via BMR/TDEE if blank"/>
          </div>

          <!-- BMR/TDEE Inputs -->
          <div>
            <label class="fld">Age</label>
            <input class="input" type="number" name="age" min="16" max="85" value="35"/>
          </div>
          <div>
            <label class="fld">Activity level</label>
            <select class="input" name="activity_level">
              <option value="sedentary">Sedentary</option>
              <option value="light">Light</option>
              <option value="moderate" selected>Moderate</option>
              <option value="very">Very active</option>
              <option value="athlete">Athlete</option>
            </select>
          </div>
          <div>
            <label class="fld">Height — feet</label>
            <input class="input" type="number" name="height_ft" min="4" max="7" value="5"/>
          </div>
          <div>
            <label class="fld">Height — inches</label>
            <input class="input" type="number" name="height_in" min="0" max="11" value="10"/>
          </div>
          <div class="sm:col-span-2">
            <label class="fld">OR height (cm)</label>
            <input class="input" type="number" name="height_cm" step="0.1" placeholder="Optional. Overrides feet/inches."/>
          </div>
          <div class="sm:col-span-2">
            <label class="fld">Sex (optional)</label>
            <select class="input" name="sex">
              <option value="neutral" selected>Prefer not to say / Neutral</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
            </select>
          </div>

          <div>
            <label class="fld">Time per cook</label>
            <select class="input" name="time_per_cook">
              <option>5</option><option selected>10</option><option>15</option>
            </select>
          </div>
          <div>
            <label class="fld">Weekly budget ($)</label>
            <input class="input" type="number" name="budget" min="50" max="300" value="180"/>
          </div>

          <div class="sm:col-span-2 mt-2">
            <label class="inline-flex items-center gap-3">
              <input class="checkbox" type="checkbox" name="low_carb"/>
              <span class="text-sm text-slate-300">Low‑Carb mode (adjust macro shares)</span>
            </label>
          </div>

          <div class="sm:col-span-2">
            <button class="cta-primary">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 opacity-90" viewBox="0 0 24 24" fill="currentColor"><path d="m5 12 5 5L20 7"/></svg>
              Generate My Week
            </button>
          </div>
        </form>
      </div>

      <aside class="card-xl p-6">
        <h3 class="text-lg font-semibold mb-3">Quick Presets</h3>
        <div class="grid gap-3">
          <button type="button" onclick="presetSolo()" class="preset">
            <span>Solo, $80 budget, Fat Loss</span>
            <span class="kbd">4 meals • 10 min</span>
          </button>
          <button type="button" onclick="presetCouple()" class="preset">
            <span>Couple, $140 budget, Recomp</span>
            <span class="kbd">3 meals • 15 min</span>
          </button>
          <button type="button" onclick="presetFamily()" class="preset">
            <span>Family of 3, $180 budget, Maintenance</span>
            <span class="kbd">4 meals • 10 min</span>
          </button>
        </div>
        <p class="text-xs text-slate-400 mt-4">
          Fine‑tune later with one‑click swaps. Your plan is stored locally until you refresh.
        </p>
      </aside>
    </div>
  </div>
</section>

<script>
  function presetSolo(){
    document.querySelector('[name="goal"]').value='Fat loss';
    document.querySelector('[name="meals_per_day"]').value='4';
    document.querySelector('[name="bodyweight"]').value=180;
    document.querySelector('[name="age"]').value=35;
    document.querySelector('[name="activity_level"]').value='moderate';
    document.querySelector('[name="height_ft"]').value=5;
    document.querySelector('[name="height_in"]').value=11;
    document.querySelector('[name="budget"]').value=80;
    document.querySelector('[name="time_per_cook"]').value=10;
    document.querySelector('[name="low_carb"]').checked=true;
  }
  function presetCouple(){
    document.querySelector('[name="goal"]').value='Recomp';
    document.querySelector('[name="meals_per_day"]').value='3';
    document.querySelector('[name="bodyweight"]').value=170;
    document.querySelector('[name="age"]').value=32;
    document.querySelector('[name="activity_level"]').value='moderate';
    document.querySelector('[name="height_ft"]').value=5;
    document.querySelector('[name="height_in"]').value=8;
    document.querySelector('[name="budget"]').value=140;
    document.querySelector('[name="time_per_cook"]').value=15;
    document.querySelector('[name="low_carb"]').checked=false;
  }
  function presetFamily(){
    document.querySelector('[name="goal"]').value='Maintenance';
    document.querySelector('[name="meals_per_day"]').value='4';
    document.querySelector('[name="bodyweight"]').value=190;
    document.querySelector('[name="age"]').value=38;
    document.querySelector('[name="activity_level"]').value='light';
    document.querySelector('[name="height_ft"]').value=6;
    document.querySelector('[name="height_in"]').value=0;
    document.querySelector('[name="budget"]').value=180;
    document.querySelector('[name="time_per_cook"]').value=10;
    document.querySelector('[name="low_carb"]').checked=false;
  }
</script>
{% endblock %}
